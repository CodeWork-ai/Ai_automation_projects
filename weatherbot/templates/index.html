<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Weather Assistant</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Link to your CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-cloud-sun-fill me-2"></i>Global Weather Assistant
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-about">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Chat Interface -->
    <div class="hero-section">
        <div class="container">
            <!-- This structure is for the chat box -->
            <div class="chat-container">
                <div class="chat-display" id="chat-display">
                    <!-- Chat messages will appear here -->
                </div>
                <div class="search-box">
                    <input type="text" class="form-control" id="locationInput" placeholder="Ask me about the weather...">
                    <button id="searchBtn">
                        <i class="bi bi-send-fill"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Error Message -->
        <div class="error-message" id="errorMessage">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <span id="errorText"></span>
        </div>

        <!-- Loading Spinner -->
        <div class="loading" id="loadingSpinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Fetching weather data...</p>
        </div>

        <!-- Weather Results -->
        <div id="weatherResults" style="display: none;">
            <!-- Map -->
            <div id="map"></div>

            <!-- Weather Tabs -->
            <ul class="nav nav-tabs" id="weatherTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="current-tab" data-bs-toggle="tab" data-bs-target="#current" type="button" role="tab">
                        <i class="bi bi-thermometer-half me-1"></i> Current
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="forecast-tab" data-bs-toggle="tab" data-bs-target="#forecast" type="button" role="tab">
                        <i class="bi bi-calendar-week me-1"></i> Forecast
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="historical-tab" data-bs-toggle="tab" data-bs-target="#historical" type="button" role="tab">
                        <i class="bi bi-clock-history me-1"></i> Historical
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="marine-tab" data-bs-toggle="tab" data-bs-target="#marine" type="button" role="tab">
                        <i class="bi bi-water me-1"></i> Marine
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="air-tab" data-bs-toggle="tab" data-bs-target="#air" type="button" role="tab">
                        <i class="bi bi-wind me-1"></i> Air Quality
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="weatherTabsContent">
                <!-- Current Weather Tab -->
                <div class="tab-pane fade show active" id="current" role="tabpanel">
                    <div class="weather-card">
                        <div class="weather-card-header">
                            <h4 class="mb-0">Current Weather</h4>
                        </div>
                        <div class="weather-card-body">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center mb-4">
                                        <i class="bi bi-thermometer-half weather-icon me-3"></i>
                                        <div>
                                            <h2 class="temperature mb-0" id="currentTemp">--Â°C</h2>
                                            <p class="mb-0 fs-5" id="currentLocation">--</p>
                                        </div>
                                    </div>
                                    <h4 id="currentCondition">--</h4>
                                </div>
                                <div class="col-md-6">
                                    <div class="weather-detail"><i class="bi bi-moisture"></i><span id="currentHumidity">--</span></div>
                                    <div class="weather-detail"><i class="bi bi-wind"></i><span id="currentWind">--</span></div>
                                    <div class="weather-detail"><i class="bi bi-speedometer2"></i><span id="currentPressure">--</span></div>
                                    <div class="weather-detail"><i class="bi bi-eye"></i><span id="currentVisibility">--</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container"><canvas id="currentChart"></canvas></div>
                </div>

                <!-- Forecast Tab -->
                <div class="tab-pane fade" id="forecast" role="tabpanel">
                    <div class="weather-card">
                        <div class="weather-card-header"><h4 class="mb-0">Weather Forecast</h4></div>
                        <div class="weather-card-body">
                            <div class="row" id="forecastContainer"><!-- Forecast days will be inserted here --></div>
                        </div>
                    </div>
                    <div class="chart-container"><canvas id="forecastChart"></canvas></div>
                </div>

                <!-- Historical Tab -->
                <div class="tab-pane fade" id="historical" role="tabpanel">
                    <div class="weather-card">
                        <div class="weather-card-header"><h4 class="mb-0">Historical Weather Data</h4></div>
                        <div class="weather-card-body">
                            <div class="row mb-3">
                                <div class="col-md-5"><label for="startDate" class="form-label">Start Date</label><input type="date" class="form-control" id="startDate"></div>
                                <div class="col-md-5"><label for="endDate" class="form-label">End Date</label><input type="date" class="form-control" id="endDate"></div>
                                <div class="col-md-2 d-flex align-items-end"><button class="btn btn-primary w-100" id="getHistoricalBtn">Get Data</button></div>
                            </div>
                            <div id="historicalContainer"><!-- Historical data will be inserted here --></div>
                        </div>
                    </div>
                    <div class="chart-container"><canvas id="historicalChart"></canvas></div>
                </div>

                <!-- Marine Tab -->
                <div class="tab-pane fade" id="marine" role="tabpanel">
                    <div class="weather-card">
                        <div class="weather-card-header"><h4 class="mb-0">Marine Weather Data</h4></div>
                        <div class="weather-card-body" id="marineContainer"><!-- Marine data will be inserted here --></div>
                    </div>
                    <div class="chart-container"><canvas id="marineChart"></canvas></div>
                </div>

                <!-- Air Quality Tab -->
                <div class="tab-pane fade" id="air" role="tabpanel">
                    <div class="weather-card">
                        <div class="weather-card-header"><h4 class="mb-0">Air Quality Information</h4></div>
                        <div class="weather-card-body" id="airQualityContainer"><!-- Air quality data will be inserted here --></div>
                    </div>
                    <div class="chart-container"><canvas id="airChart"></canvas></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6"><h5>Global Weather Assistant</h5><p>Providing comprehensive weather information for any location worldwide.</p></div>
                <div class="col-md-3"><h5>Links</h5><ul class="list-unstyled"><li><a href="#" id="footer-home">Home</a></li><li><a href="#" id="footer-about">About</a></li><li><a href="#">Privacy Policy</a></li></ul></div>
                <div class="col-md-3"><h5>API</h5><p>Powered by Open-Meteo API</p></div>
            </div>
            <div class="text-center mt-4"><p>&copy; 2025 Global Weather Assistant. All rights reserved.</p></div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>